#高级算法复习

[[高级算法]]


以下从含义、经典问题分析两方面，帮你梳理如何理解与应用**平摊分析**：

### 一、平摊分析（Amortized Analysis）含义

平摊分析是算法分析领域的关键工具，核心是**弱化“单次操作的极端代价”，聚焦“一系列操作的平均成本”** 。

- 当算法中某些操作偶尔触发高耗时（比如栈的批量弹出、动态数组扩容），单次分析会夸大最坏情况；平摊分析通过“均摊成本”，更精准反映算法在连续操作序列里的实际效率，辅助判断算法长期执行的性能。

### 二、经典问题1：MultiPop Stack（多弹出栈）

#### 场景与操作

栈支持 `push`（压入）、`pop`（弹出1个）、`multiPop(k)`（弹出最多 `k` 个，或栈空则停）。
极端情况（如 `multiPop(n)` 一次性弹空栈）单次操作时间复杂度是 \( O(n) \)，但平摊分析可修正这种“最坏情况”的误导性。

#### 平摊分析（会计方法/聚合方法）

- **聚合方法**：统计 \( n \) 次操作（`push`+`pop`+`multiPop`）的总实际代价。每个元素最多被压入1次、弹出1次，总操作次数  $\leq 2n$，因此**平摊到每次操作的成本是  O(1)** 。
- **会计方法**：给 `push` 分配“2单位”虚拟成本（1单位用于自身压入，1单位预留给未来弹出）。`popmultiPop` 用预存成本支付，无需额外“透支”，保证每次操作平摊成本稳定。

### 三、经典问题2：DeleteLargerHalf（删除超过半数元素，需结合具体逻辑，以动态数组“批量删除”为例）

#### 场景与操作

假设动态数组支持“删除末尾超过半数元素”（如数组长度为 \( m \)，删除后 \( \lfloor m/2 \rfloor \) 个元素保留）。单次删除可能因需搬运大量元素（如数组扩容后收缩）导致高耗时，但平摊分析可抹平波动。

#### 平摊分析（势能方法）

- 定义“势能函数”：比如用数组实际占用空间与容量的差值衡量“冗余度”。扩容时势能增加（储备未来操作资源），删除时势能释放。
- 操作序列中，扩容的高成本会被后续删除的“低势能消耗”均摊，最终**平摊时间复杂度趋近 \( O(1) \) 或线性操作的稳定值**，体现算法长期执行的效率。

### 四、核心价值

平摊分析的意义在于**还原算法真实效率**   —— 避免被单次极端操作干扰，更贴合实际场景（如用户连续交互、数据流式处理）。无论是栈操作、动态结构维护，还是复杂数据结构（哈希表扩容、二叉堆调整），平摊分析都能帮你精准评估：“长期跑下来，算法到底多快？”

理解这两类经典问题，就能掌握平摊分析的**思路本质**：
用“整体视角+成本均摊”，破解“单次操作最坏情况”的迷惑性，是算法设计、性能优化的必备分析工具 。
